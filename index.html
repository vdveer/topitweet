<html>
	<head>
		<title>Tweets</title>
		<link href='http://fonts.googleapis.com/css?family=Nunito:400,700' rel='stylesheet' type='text/css'>
		<style>
			body {background-color: #fde350; font-family: 'Nunito', sans-serif; margin:0; padding:0; }
			h1 {font-size: 70px; margin:0;}
			h2 {font-family: 'Nunito', sans-serif; font-size: 40px; margin:0;}
			#tweet {
			}
			.outer {
			    display: table;
			    position: absolute;
			    height: 100%;
			    width: 100%;
			    margin: 0;
			    padding: 0;
			}

			.middle {
			    display: table-cell;
			    vertical-align: middle;
			}

			.inner {
			    margin-left: 15%;
			    margin-right: 15%; 
			}
			.right{
				text-align: right;
			}
			.center{
				text-align: center;;
			}
			.info
			{
				font-size:20px;
				padding: 10px;
			}
			.emp
			{
				font-style: oblique;
				font-weight: bold;
			}
		</style>
		<script src="twitter.props.js" ></script>
		<script src="jquery.js" ></script>
		<script src="codebird.js" ></script>
	</head>
	<body>

		<div class="info center">Meedoen? Gebruik <span class="emp">#topiconf</span> in je tweet!</div>
		<div class="outer">
			<div class="middle">
				<div class="inner">
					<div id="tweet">
						<h1 id="tweetContent"></h1>
						<h2 class="right" id="tweetSubtext"></h2>
					</div>
				</div>
			</div>
		</div>

		<script language="javascript">

			$(document).ready(function(){
				var hashtag = window.location.hash;
				if(hashtag === "")
					hashtag = "topiconf";
				
			requestTweets();

			function requestTweets(){
var cb = new Codebird;
			cb.setConsumerKey('wBwd52ZJ8HMvQ2h7SLUkDg', 'TbUjK8k51tMwfh1cue5NKpGDfHKhvudjEtrKjUzjyQA');

			cb.__call(
			    "oauth_requestToken",
   				 {oauth_callback: "oob"},
    			function (reply) {
       				 // stores it
    			    cb.setToken(reply.oauth_token, reply.oauth_token_secret);

			        // gets the authorize screen URL
        			cb.__call(
         			   "oauth_authorize",
           			 {},
         			   function (auth_url) {
        			        window.codebird_auth = window.open(auth_url);
           			 }
      			  );
   			 }
			);


				cb.__call(
			  "search_tweets",
  			  "q=#"+hashtag,
   				 function (reply) {
					console.log(reply);
					var statuses = reply.statuses;
					if(statuses.length>0){
						showTweet(statuses, 0);
					}

    			},
 				   false // this parameter required
				);
			}

			function showTweet(statuses, index){
				var status = statuses[index];


				$('#tweetContent').html("\"" + status.text + "\"");
				$('#tweetSubtext').html("@" + status.user.screen_name );
				$('#tweet').fadeIn(1000,function(){
					$('#tweet').fadeOut(1000, function(){
						if(index+1<statuses.length){
							showTweet(statuses, index+1);
						}
						else{
							requestTweets();
						}
					});
				}).delay(5000);
			}

		});

		</script>
	</body>
</html>